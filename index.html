<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Solana Trend Tracker - Demo</title>
<style>
body { margin:0; font-family:Arial,sans-serif; background:#0f0f13; color:#fff; padding:12px; }
h1 { text-align:center; color:#55ff99; margin-bottom:16px; }
.controls { display:flex; justify-content:center; gap:12px; margin-bottom:12px; flex-wrap:wrap; }
.select-sort, .select-time { background:#1b1b1f; color:#fff; border:1px solid rgba(255,255,255,0.03); border-radius:6px; padding:6px 10px; }
.token-grid { display:grid; grid-template-columns: repeat(auto-fill,minmax(320px,1fr)); gap:12px; }
.card { background:#1b1b1f; border-radius:12px; padding:12px; border:1px solid rgba(255,255,255,0.03); transition: transform 0.15s; }
.card:hover { transform:translateY(-4px); box-shadow:0 10px 30px rgba(0,0,0,0.5);}
.token-header { display:flex; align-items:center; gap:10px; margin-bottom:8px; }
.logo { width:48px; height:48px; border-radius:10px; object-fit:cover; background:#07070a;}
.title { font-weight:700; font-size:1.1em;}
.small { font-size:12px; color:#aaa;}
.metric { margin-top:6px;}
.social-links a { margin-right:8px; color:#55ff99; text-decoration:none; font-size:12px;}
</style>
</head>
<body>

<h1>Solana Trend Tracker - Demo</h1>

<div class="controls">
  <label>Sort by:
    <select id="sortSelect" class="select-sort">
      <option value="trendScore">Trend Score</option>
      <option value="tokenScore">Token Score</option>
      <option value="socialScore">Social Score</option>
      <option value="newsScore">News Score</option>
    </select>
  </label>
  <label>Time window:
    <select id="timeSelect" class="select-time">
      <option value="1h">1h</option>
      <option value="4h">4h</option>
      <option value="8h">8h</option>
      <option value="24h">24h</option>
      <option value="1w">1w</option>
    </select>
  </label>
</div>

<div id="tokenGrid" class="token-grid">
  <p>Loading tokens...</p>
</div>

<script>
// === Mock Data ===
let mockTokens = [];
function generateMockTokens(n=20){
  const names = ["SOLFire","ApeX","MoonBeam","PumpFun","TokenX","StarCoin"];
  const symbols = ["SOLF","APEX","MB","PUMP","TX","SC"];
  const socials = ["twitter","tiktok","reddit"];
  const now = Date.now();
  mockTokens = [];
  for(let i=0;i<n;i++){
    const name = names[Math.floor(Math.random()*names.length)]+"#"+(i+1);
    const symbol = symbols[Math.floor(Math.random()*symbols.length)]+i;
    const createdAt = now - Math.floor(Math.random()*7*24*3600*1000); // last 7 days
    const volume = Math.random()*5000;
    const liquidity = Math.random()*20000;
    const holders = Math.floor(Math.random()*1000);
    const tokenScore = Math.random()*100;
    const socialScore = Math.random()*100;
    const newsScore = Math.random()*100;
    const trendScore = 0.5*tokenScore + 0.3*socialScore + 0.2*newsScore;
    const socialLinks = {};
    socials.forEach(s=>{ if(Math.random()<0.5) socialLinks[s]="https://"+s+".com/"+symbol; });
    mockTokens.push({name,symbol,createdAt,volume,liquidity,holders,tokenScore,socialScore,newsScore,trendScore,socialLinks});
  }
}

// === Utils ===
function formatAge(ms){
  let totalSec = Math.floor(ms/1000);
  const h = Math.floor(totalSec/3600); totalSec%=3600;
  const m = Math.floor(totalSec/60); totalSec%=60;
  const s = totalSec;
  return `${h}h ${m}m ${s}s`;
}

function sortAndRender(){
  const sortBy = document.getElementById('sortSelect').value;
  const timeWindow = document.getElementById('timeSelect').value;
  const now = Date.now();
  let windowMs = 3600000; // default 1h
  if(timeWindow==="4h") windowMs=4*3600000;
  else if(timeWindow==="8h") windowMs=8*3600000;
  else if(timeWindow==="24h") windowMs=24*3600000;
  else if(timeWindow==="1w") windowMs=7*24*3600000;

  let filtered = mockTokens.filter(t => now - t.createdAt <= windowMs);
  filtered.forEach(t=>t.ageMs=now-t.createdAt);

  filtered.sort((a,b)=>{
    if(sortBy==="trendScore") return b.trendScore - a.trendScore;
    if(sortBy==="tokenScore") return b.tokenScore - a.tokenScore;
    if(sortBy==="socialScore") return b.socialScore - a.socialScore;
    if(sortBy==="newsScore") return b.newsScore - a.newsScore;
    return 0;
  });

  renderTokens(filtered);
}

function renderTokens(tokens){
  const tokenGrid = document.getElementById('tokenGrid');
  tokenGrid.innerHTML='';
  if(!tokens.length){ tokenGrid.innerHTML='<p class="small">No tokens in this time window.</p>'; return;}
  tokens.forEach(t=>{
    const card = document.createElement('div'); card.className='card';
    const mintShort = t.symbol+"-"+Math.floor(Math.random()*9999);
    // social html
    let socialHtml='';
    for(const [k,v] of Object.entries(t.socialLinks)){ socialHtml+=`<a href="${v}" target="_blank">${k}</a>`; }

    card.innerHTML=`
      <div class="token-header">
        <div>
          <div class="title">${t.name} (${t.symbol})</div>
          <div class="small">Contract: ${mintShort}</div>
        </div>
      </div>
      <div class="metric">Trend Score: ${t.trendScore.toFixed(2)}</div>
      <div class="metric">Token Score: ${t.tokenScore.toFixed(2)}</div>
      <div class="metric">Social Score: ${t.socialScore.toFixed(2)}</div>
      <div class="metric">News Score: ${t.newsScore.toFixed(2)}</div>
      <div class="metric">Liquidity: $${Math.round(t.liquidity).toLocaleString()}</div>
      <div class="metric small">Holders: ${t.holders}</div>
      <div class="metric small">Age: ${formatAge(t.ageMs)}</div>
      ${socialHtml ? `<div class="social-links">${socialHtml}</div>` : ''}
    `;
    tokenGrid.appendChild(card);
  });
}

// === Init ===
generateMockTokens(30);
sortAndRender();
document.getElementById('sortSelect').onchange=sortAndRender;
document.getElementById('timeSelect').onchange=sortAndRender;

// auto-refresh every 5 sec
setInterval(()=>{
  generateMockTokens(30); // simulate new tokens
  sortAndRender();
},5000);

</script>
</body>
</html>
